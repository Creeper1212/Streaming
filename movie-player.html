<!DOCTYPE html>
<html>
<head>
  <title>Movie Player</title>
</head>
<body>
  <h1>Movie Player</h1>

  <script>
    // Get the TMDb ID from the query parameters
    const params = new URLSearchParams(window.location.search);
    const tmdbId = params.get('tmdbId');
    const apiKey = '0750b3ed2cd386ac84492758e9f3d5b6'; // Your TMDb API key

    // Fetch the embed HTML from Vidsrc using the TMDb ID
    async function fetchEmbedHtml(tmdbId) {
      try {
        const response = await fetch(`https://vidsrc.xyz/embed/movie?tmdb=${tmdbId}`);
        return await response.text(); // Get the response as text
      } catch (error) {
        console.error("Error fetching embed HTML:", error);
        alert("An error occurred while fetching the embed HTML. Please try again later.");
        return null;
      }
    }

    // Set the iframe src to the embed URL
    async function setPlayerSource() {
      const embedHtml = await fetchEmbedHtml(tmdbId);
      if (embedHtml) {
        // Create a new div and set its innerHTML to the embed HTML
        const playerContainer = document.createElement('div');
        playerContainer.innerHTML = embedHtml;
        // Append the playerContainer to the body
        document.body.appendChild(playerContainer);
      }
    }

    setPlayerSource(); // Call the function to fetch and set the embed HTML

  </script>
</body>
</html>
